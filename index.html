<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fluency Studio ‚Äî Portal do Aluno</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet" />
  <style>
    body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; background-color: #f8fafc; }
    .animate-enter { animation: fadeIn 0.35s ease-out forwards; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body class="text-slate-900 select-none">
  <div id="root"></div>

  <script>
    const DB = {
      users: [
        {
          email: 'kaiolaraamado14@gmail.com',
          pass: 'fluencystudio',
          name: 'Kaio Lara',
          level: 'Student - Fluency Studio'
        }
      ],
      modules: [
        { id: 1, title: 'M√≥dulo 1', start: 1, end: 50, subtitle: 'Fundamentos e base da comunica√ß√£o.' },
        { id: 2, title: 'M√≥dulo 2', start: 51, end: 100, subtitle: 'Constru√ß√£o de flu√™ncia e conversa√ß√£o.' },
        { id: 3, title: 'M√≥dulo 3', start: 101, end: 150, subtitle: 'Dom√≠nio avan√ßado e performance.' }
      ],
      currentLesson: 59
    };

    const root = document.getElementById('root');

    const icons = {
      check: '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>',
      logOut: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>'
    };

    function getStoredUser() {
      try {
        return JSON.parse(localStorage.getItem('fluency_user'));
      } catch {
        return null;
      }
    }

    function saveUser(user) {
      localStorage.setItem('fluency_user', JSON.stringify(user));
    }

    function clearUser() {
      localStorage.removeItem('fluency_user');
    }

    function lessonStatus(lessonNumber) {
      if (lessonNumber < DB.currentLesson) return 'done';
      if (lessonNumber === DB.currentLesson) return 'active';
      return 'locked';
    }

    function generateLessons(module) {
      const lessons = [];
      for (let number = module.start; number <= module.end; number += 1) {
        lessons.push({
          number,
          localNumber: number - module.start + 1,
          moduleId: module.id,
          moduleTitle: module.title,
          title: `Lesson ${number}`,
          summary: `Li√ß√£o ${number - module.start + 1} de 50 neste m√≥dulo.`
        });
      }
      return lessons;
    }

    function render() {
      const user = getStoredUser();
      root.innerHTML = user ? dashboardHtml(user) : loginHtml();

      if (user) {
        const logoutButton = document.getElementById('logout-btn');
        logoutButton.addEventListener('click', () => {
          clearUser();
          render();
        });
      } else {
        const form = document.getElementById('login-form');
        const errorBox = document.getElementById('login-error');
        form.addEventListener('submit', (e) => {
          e.preventDefault();
          const email = form.email.value.trim();
          const password = form.password.value;
          const found = DB.users.find((u) => u.email === email && u.pass === password);

          if (!found) {
            errorBox.textContent = 'E-mail ou senha incorretos.';
            errorBox.classList.remove('hidden');
            return;
          }

          saveUser(found);
          render();
        });
      }
    }

    function loginHtml() {
      return `
        <div class="min-h-screen flex items-center justify-center p-6 bg-slate-900">
          <div class="bg-white w-full max-w-sm rounded-2xl shadow-2xl p-8 animate-enter">
            <div class="text-center mb-8">
              <h1 class="text-2xl font-black text-slate-800 tracking-tight">Fluency Studio</h1>
              <p class="text-slate-500 text-sm font-medium">Portal do Aluno</p>
            </div>
            <form id="login-form" class="space-y-4">
              <div>
                <label class="text-xs font-bold text-slate-400 uppercase">E-mail</label>
                <input name="email" type="email" value="kaiolaraamado14@gmail.com" class="w-full border-b-2 border-slate-200 py-2 focus:border-indigo-600 outline-none bg-transparent" />
              </div>
              <div>
                <label class="text-xs font-bold text-slate-400 uppercase">Senha</label>
                <input name="password" type="password" class="w-full border-b-2 border-slate-200 py-2 focus:border-indigo-600 outline-none bg-transparent" />
              </div>
              <p id="login-error" class="hidden text-red-500 text-xs font-bold text-center bg-red-50 p-2 rounded"></p>
              <button class="w-full bg-indigo-600 text-white font-bold py-4 rounded-xl shadow-lg shadow-indigo-200 hover:bg-indigo-700 active:scale-95 transition-transform mt-4">Acessar Portal</button>
            </form>
          </div>
        </div>
      `;
    }

    function lessonItemHtml(lesson) {
      const status = lessonStatus(lesson.number);
      const stateStyle = status === 'done'
        ? 'bg-green-500 text-white'
        : status === 'active'
          ? 'bg-indigo-600 text-white ring-4 ring-indigo-100'
          : 'bg-slate-200 text-slate-400';

      const lockedStyle = status === 'locked' ? 'opacity-70' : '';
      const marker = status === 'done' ? icons.check : `<span class="font-bold text-[10px]">${lesson.number}</span>`;
      const badge = status === 'done' ? 'Conclu√≠da' : status === 'active' ? 'Atual' : 'Bloqueada';
      const badgeStyle = status === 'done'
        ? 'bg-green-50 text-green-700'
        : status === 'active'
          ? 'bg-indigo-50 text-indigo-700'
          : 'bg-slate-100 text-slate-500';

      return `
        <div class="relative flex gap-4 py-2.5 ${lockedStyle}">
          <div class="w-9 h-9 rounded-full flex items-center justify-center shrink-0 z-10 border-4 border-slate-50 transition-colors ${stateStyle}">
            ${marker}
          </div>

          <div class="flex-1 bg-white p-4 rounded-xl shadow-sm border border-slate-100">
            <div class="flex items-center justify-between gap-3 mb-1">
              <h4 class="font-bold text-slate-800 text-sm">${lesson.title}</h4>
              <span class="text-[10px] font-bold px-2 py-1 rounded-full ${badgeStyle}">${badge}</span>
            </div>
            <p class="text-xs text-slate-500 mb-1">${lesson.summary}</p>
            <p class="text-[11px] text-slate-400">${lesson.moduleTitle} ‚Ä¢ Li√ß√£o ${lesson.localNumber}/50</p>
          </div>
        </div>
      `;
    }

    function moduleTimelineHtml(module) {
      const lessons = generateLessons(module);
      const lessonsHtml = lessons.map((lesson) => lessonItemHtml(lesson)).join('');

      return `
        <section class="mb-8" id="module-${module.id}">
          <div class="mb-3 bg-white rounded-xl border border-slate-200 p-4 shadow-sm">
            <p class="text-[11px] font-extrabold uppercase tracking-wide text-indigo-600">${module.title}</p>
            <h3 class="text-sm font-semibold text-slate-800">Lesson ${module.start} at√© Lesson ${module.end}</h3>
            <p class="text-xs text-slate-500 mt-1">${module.subtitle}</p>
          </div>

          <div class="relative">
            <div class="absolute left-[17px] top-3 bottom-3 w-0.5 bg-slate-200"></div>
            ${lessonsHtml}
          </div>
        </section>
      `;
    }

    function dashboardHtml(user) {
      const firstName = user.name.split(' ')[0];
      const modulesHtml = DB.modules.map((module) => moduleTimelineHtml(module)).join('');

      return `
        <div class="max-w-md mx-auto min-h-screen bg-slate-50 pb-12 animate-enter">
          <header class="bg-white px-6 pt-12 pb-6 shadow-sm border-b border-slate-100 flex justify-between items-end sticky top-0 z-10">
            <div>
              <p class="text-xs font-bold text-indigo-600 uppercase mb-1">Student Portal</p>
              <h1 class="text-2xl font-bold text-slate-900">Ol√°, ${firstName} üëã</h1>
            </div>
            <button id="logout-btn" class="bg-slate-100 p-2 rounded-full text-slate-500 hover:text-red-500">${icons.logOut}</button>
          </header>

          <main class="p-6">
            <div class="bg-indigo-600 rounded-2xl p-6 text-white shadow-xl shadow-indigo-200 mb-8 relative overflow-hidden">
              <div class="relative z-10">
                <p class="text-indigo-200 text-xs font-bold uppercase mb-1">Seu N√≠vel</p>
                <h2 class="text-xl font-bold">${user.level}</h2>
                <p class="text-indigo-100 text-xs mt-2">Progresso atual: Lesson ${DB.currentLesson}</p>
              </div>
              <div class="absolute -right-4 -bottom-10 w-32 h-32 bg-indigo-500 rounded-full opacity-50 blur-2xl"></div>
            </div>

            <div class="mb-6">
              <h3 class="font-bold text-lg text-slate-800">Sua Trilha Completa</h3>
              <p class="text-xs text-slate-500 mt-1">Linha do tempo li√ß√£o por li√ß√£o: Lesson 1 at√© Lesson 150.</p>
            </div>

            ${modulesHtml}
          </main>
        </div>
      `;
    }

    render();
  </script>
</body>
</html>
